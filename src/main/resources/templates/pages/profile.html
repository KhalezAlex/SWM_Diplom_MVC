<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Profile</title>
</head>
<body>
<h1>[[${profile.customer.login}]]</h1>
<!--    Форма просмотра профиля, если на страницу зашёл не ее хозяин-->
        <div style="display: flex; flex-direction: column" th:if="${!isOwner}" th:object="${profile}">
            <label for="profile-name-dis">Name</label>
            <input id="profile-name-dis" th:type="text" th:field="*{name}" disabled />
            <label for="profile-phone-dis">Phone</label>
            <input id="profile-phone-dis" th:type="text" th:field="*{phone}" disabled />
            <label for="profile-age-dis">Age</label>
            <input id="profile-age-dis" th:type="number" th:field="*{age}" disabled/>
            <label for="profile-events_organized-dis">Events organized</label>
            <input id="profile-events_organized-dis" th:type="number" th:field="*{events_organized}" disabled/>
        </div>

<!--    Форма редактирования профиля-->
    <form th:if="${isOwner}" method="post" th:action="@{/customer/profile}" th:object="${profile}">
        <input th:field=" *{id}" hidden/>
        <label for="profile-name">Name</label>
        <input id="profile-name" th:type="text" th:field="*{name}" required min="1" max="20"/>
        <label for="profile-phone">Phone</label>
        <input id="profile-phone" th:type="text" th:field="*{phone}" required min="0" max="12"/>
        <label for="profile-age">Age</label>
        <input id="profile-age" th:type="number" th:field="*{age}" required min="0" max="100"/>

<!--подгрузка городов в профиль для изменения        -->
        <select name="city">
            <th:block th:each="location: ${cities}">
<!--если в профиле указан город-->
                <th:block th:if="${profile.city != null}">
<!--если город в итераторе совпадает с городом в профиле, ставим атрибут selected-->
                    <option th:if="${location.name == profile.city.getName()}" selected>
                        [[${location.name}]]
                    </option>
<!--иначе, грузим без аттрибута-->
                    <option th:if="${location.name != profile.city.getName()}">
                        [[${location.name}]]
                    </option>
                </th:block>
<!--если в профиле город не указан-->
                <option th:if="${profile.city == null}">
                    [[${location.name}]]
                </option>
            </th:block>
        </select>

        <label for="profile-events_organized">Events organized</label>
        <input id="profile-events_organized" th:type="number" th:field="*{events_organized}" disabled/>
        <label for="profile-strikes_amount">Strikes</label>
        <input id="profile-strikes_amount" th:type="number" th:field="*{name}" disabled required min="0" max="3"/>
        <button>Add</button>
    </form>
        <a th:href="@{/}">Cancel</a>

    <a th:href="@{/logout}">Log out</a>
</body>
</html>